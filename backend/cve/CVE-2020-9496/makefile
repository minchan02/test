.PHONY: all pip-install ysoserial-install ngrok-check ngrok-start

all: pip-install ysoserial-install ngrok-check  ngrok-start

ngrok-check:
	@echo "Checking if ngrok is installed..."
	@ngrok version > /dev/null 2>&1
	@if [ $$? -ne 0 ]; then \
		echo "ngrok is not installed. Installing ngrok..."; \
		exit 1; \
	else \
		echo "ngrok is installed."; \
	fi

ngrok-start:
	@echo "Starting ngrok server..."
	ngrok http 4444

pip-install:
	@echo "Installing pip modules..."
	pip install requests urllib3 

ysoserial-install:
	@echo "Installing ysoserial...."
	sudo wget https://github.com/frohoff/ysoserial/releases/latest/download/ysoserial-all.jar